<style>
  .tab {
    display: none;
  }
  .step {
    height: 10px;
    width: 10px;
    margin: 0 2px;
    background-color: #bbbbbb;
    border: none;
    border-radius: 50%;
    display: inline-block;
    opacity: 0.5;
  }
  .step.active {
    opacity: 1;
  }
  .step.finish {
    background-color: #4caf50;
  }

  body {
    font-size: 0.85rem;
  }
  .form-control {
    border: 1px solid #9e9e9e !important;
    box-shadow: none !important;
    padding: 3px 6px !important;
    font-size: 0.85rem;
  }
  .form-check-input {
    border-color: #737373 !important;
    width: 0.9em;
    height: 0.9em;
  }
  .form-check-input:checked {
    background-color: #000000 !important;
    border-color: #000000 !important;
  }
  label,
  .form-check-label {
    font-size: 0.85rem;
  }
  h4 {
    font-size: 1rem;
    margin-top: 0.5rem !important;
    margin-bottom: 0.5rem !important;
  }
  .mb-3 {
    margin-bottom: 0.5rem !important;
  }
  .mt-4 {
    margin-top: 0.5rem !important;
  }
  .card {
    margin-bottom: 0.75rem !important;
    padding: 1rem !important;
  }
  .btn {
    font-size: 0.85rem;
    padding: 0.3rem 0.75rem;
  }
</style>

<div class="container mt-5">
  <div class="card">
    <div class="card-header card-header-primary">
      <h4 class="card-title">Register</h4>
      <p class="card-category">Complete your registration</p>
    </div>
    <div class="card-body">
      <form id="regForm" onsubmit="return false;">
        <!-- Step 1 -->
        <div class="tab">
          <div class="card p-4">
            <!-- 1. Personal Information -->
            <h4>Personal Information</h4>
            <div class="row">
              <!-- Profile Picture -->
              <div class="mb-3 text-left">
                <!--<img src="" alt="Profile Picture" class="rounded-circle mb-3 profile-img">-->
                <label>Profile photo</label>
                <input type="file" class="form-control-file" id="profilePic" />
              </div>
              <div class="col-md-6 mb-3">
                <label>Full Name</label
                ><input
                  type="text"
                  class="form-control"
                  id="full_name_student"
                />
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label d-block">Gender</label>
                <div class="form-check form-check-inline" id="gender">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="gender"
                    value="Male"
                  /><label class="form-check-label">Male</label>
                </div>
                <div class="form-check form-check-inline">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="gender"
                    value="Female"
                  /><label class="form-check-label">Female</label>
                </div>
                <div class="form-check form-check-inline">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="gender"
                    value="Other"
                  /><label class="form-check-label">Other</label>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <label>IC Number / Passport Number</label
                ><input type="text" class="form-control" id="ic_no" />
              </div>
              <div class="col-md-6 mb-3">
                <label>Date of Birth</label
                ><input type="date" class="form-control" id="dob" />
              </div>
              <div class="col-md-6 mb-3">
                <label for="nationality">Nationality</label>
                <select id="nationality" class="form-control">
                  <option value="" disabled selected>Select Nationality</option>
                  <option value="citizen">Citizen</option>
                  <option value="noncitizen">Non-Citizen</option>
                  <!-- Add more countries as needed -->
                </select>
              </div>
              <!--Race-->
              <div class="col-md-6 mb-3">
                <label for="race">Race</label>
                <select id="race" class="form-control">
                  <option value="" disabled selected>Select Race</option>
                  <option value="Malay">Malay</option>
                  <option value="China">China</option>
                  <option value="India">India</option>
                  <option value="Others">Others</option>
                  <!-- Add more countries as needed -->
                </select>
              </div>
              <!--Religion-->
              <div class="col-md-6 mb-3">
                <label for="religion">Religion</label>
                <select id="religion" class="form-control">
                  <option value="" disabled selected>Select Religion</option>
                  <option value="Islam">Islam</option>
                  <option value="Hindu">Hindu</option>
                  <option value="Buddha">Buddha</option>
                  <option value="Christian">Christian</option>
                  <option value="Others">Others</option>
                  <!-- Add more countries as needed -->
                </select>
              </div>

              <div class="col-md-6 mb-3">
                <label>Contact Number</label
                ><input type="text" class="form-control" id="phone" />
              </div>
              <div class="col-md-6 mb-3">
                <label>Emergency Contact Number</label
                ><input
                  type="text"
                  class="form-control"
                  id="emergency_contact_No"
                />
              </div>
              <div class="col-md-6 mb-3">
                <label>Emergency Contact Name</label
                ><input
                  type="text"
                  class="form-control"
                  id="emergency_contact"
                />
              </div>
              <div class="col-md-6 mb-3">
                <label>Email Address</label
                ><input type="email" class="form-control" />
              </div>
            </div>
          </div>
        </div>
        <!-- Step 2 -->
        <div class="tab">
          <div class="card p-4">
            <!-- 2. Address Information -->
            <h4 class="mt-4">Address Information</h4>
            <div class="row">
              <div class="col-md-12 mb-3">
                <label>Permanent Address</label
                ><input type="text" class="form-control" id="P_address" />
              </div>
              <div class="col-md-4 mb-3">
                <label>City</label
                ><input type="text" class="form-control" id="P_city" />
              </div>
              <div class="col-md-4 mb-3">
                <label>Postcode</label
                ><input type="text" class="form-control" id="P_postcode" />
              </div>
              <div class="col-md-4 mb-3">
                <label>State</label
                ><input type="text" class="form-control" id="P_state" />
              </div>
              <div class="col-md-4 mb-3">
                <label>Country</label
                ><input type="text" class="form-control" id="P_country" />
              </div>
              <div class="col-md-6 mb-3">
                <label>Phone Number (if different)</label
                ><input type="text" class="form-control" id="P_different_no" />
              </div>
            </div>
          </div>
        </div>
        <!-- Step 3 -->
        <div class="tab">
          <div class="card p-4">
            <!-- 3. Program Information -->
            <h4 class="mt-4">Program Information</h4>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="programstatus">Program Applied For</label>
                <select id="programstatus" class="form-control">
                  <option value="" disabled selected>
                    Select Program Status
                  </option>
                  <option value="diploma">Diploma</option>
                  <option value="degree">Degree</option>
                  <option value="master">Master</option>
                  <option value="phd">PHD</option>
                  <option value="Others">Others</option>
                  <!-- Add more countries as needed -->
                </select>
              </div>

              <!--Program-->
              <div class="col-md-6 mb-3">
                <label for="religion">Program</label>
                <select id="program_name" class="form-control">
                  <option value="" disabled selected>Select Program</option>
                  <option value="bib">
                    Bachelor of Business (HONS) International Business
                  </option>
                  <option value="saab">
                    Bachelor of Business (HONS) Engineering Entrepreneurship
                  </option>
                  <option value="opel">
                    Bachelor of New Media Communications (HONS)
                  </option>
                  <option value="audi">
                    Bachelor of Computer Engineering (HONS)
                  </option>
                  <!-- Add more countries as needed -->
                </select>
              </div>

              <div class="col-md-6 mb-3">
                <label class="form-label d-block">Mode of Study</label>
                <div class="form-check form-check-inline" id="Mode_Study">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="studyMode"
                    value="Full-Time"
                  /><label class="form-check-label">Full-Time</label>
                </div>
                <div class="form-check form-check-inline">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="studyMode"
                    value="Part-Time"
                    disabled
                  /><label class="form-check-label">Part-Time</label>
                </div>
              </div>
              <!--Intake Year -->
              <div class="col-md-6 mb-3">
                <label for="Intake">Intake</label>
                <select id="Intakeyear" class="form-control">
                  <option value="" disabled selected>Select Year</option>
                  <option value="2023">2023</option>
                  <option value="2024">2024</option>
                  <option value="2025">2025</option>
                  <option value="2026">2026</option>
                  <option value="2027">2027</option>
                  <option value="2028">2028</option>
                  <option value="2029">2029</option>
                  <option value="2030">2030</option>
                  <!-- Add more countries as needed -->
                </select>
              </div>

              <div class="col-md-6 mb-3">
                <label class="form-label d-block">Semester</label>

                <div class="form-check form-check-inline" id="semester">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="semester"
                    value="March"
                  /><label class="form-check-label">March</label>
                </div>

                <div class="form-check form-check-inline">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="semester"
                    value="October"
                  /><label class="form-check-label">October</label>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Step 4 -->
        <div class="tab">
          <div class="card p-4">
            <!-- 4. Academic Qualifications -->
            <h4 class="mt-4">Academic Qualifications</h4>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="hqo">Highest Qualification Obtained</label>
                <select id="H_Qualification" class="form-control">
                  <option value="" disabled selected>
                    Select Qualification
                  </option>
                  <option value="PMR">PMR</option>
                  <option value="SPM">SPM</option>
                  <option value="DIPLOMA">DIPLOMA</option>
                  <option value="DEGREE">DEGREE</option>
                  <option value="MASTER">MASTER</option>
                  <option value="PHD">PHD</option>
                  <option value="OTHERS">OTHERS</option>
                  <!-- Add more countries as needed -->
                </select>
              </div>
              <div class="col-md-6 mb-3">
                <label>Institution Name</label
                ><input
                  type="text"
                  class="form-control"
                  id="institution_name"
                />
              </div>
              <div class="col-md-6 mb-3">
                <label>Country of Institution</label
                ><input
                  type="text"
                  class="form-control"
                  id="Institution_country"
                />
              </div>
              <div class="col-md-6 mb-3">
                <label>Year of Graduation</label
                ><input type="text" class="form-control" id="Year_grad" />
              </div>
              <!-- Certificate -->
              <div class="mb-3 text-center">
                <!--<img src="" alt="Result" class="rounded-circle mb-3 profile-img">-->
                <label>Result</label>
                <input
                  type="file"
                  class="form-control-file"
                  id="ResultQualification"
                  accept=".jpg, .jpeg, .png"
                />
                <small id="fileHelp" class="form-text text-muted"></small>

                <script>
                  document
                    .getElementById("ResultQualification")
                    .addEventListener("change", function () {
                      const file = this.files[0];
                      const helpText = document.getElementById("fileHelp");

                      if (file) {
                        const fileSizeMB = file.size / (1024 * 1024); // Convert to MB

                        if (fileSizeMB > 2) {
                          helpText.textContent =
                            "❌ File is too large. Max size is 2MB.";
                          this.value = ""; // Clear the file input
                        } else {
                          helpText.textContent = "✅ File looks good!";
                        }
                      }
                    });
                </script>
                <label>Certificate of completion studies</label>
                <!--<img src="" alt="Certificate of completion of studies" class="rounded-circle mb-3 profile-img">-->
                <input
                  type="file"
                  class="form-control-file"
                  id="Certificate_completion_studies"
                  accept=".jpg, .jpeg, .png"
                />
                <small id="fileHelp" class="form-text text-muted"></small>

                <script>
                  document
                    .getElementById("Certificate_completion_studies")
                    .addEventListener("change", function () {
                      const file = this.files[0];
                      const helpText = document.getElementById("fileHelp");

                      if (file) {
                        const fileSizeMB = file.size / (1024 * 1024); // Convert to MB

                        if (fileSizeMB > 2) {
                          helpText.textContent =
                            "❌ File is too large. Max size is 2MB.";
                          this.value = ""; // Clear the file input
                        } else {
                          helpText.textContent = "✅ File looks good!";
                        }
                      }
                    });
                </script>
              </div>
            </div>
          </div>
        </div>
        <!-- Step 5 -->
        <div class="tab">
          <div class="card p-4">
            <h4 class="mt-4">Previous Education</h4>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label>Secondary School Name </label
                ><input type="text" class="form-control" id="secondary_name" />
              </div>
              <div class="col-md-6 mb-3">
                <label>Secondary School Address</label
                ><input
                  type="text"
                  class="form-control"
                  id="secondary_address"
                />
              </div>

              <div class="col-md-6 mb-3">
                <label for="hqo">Qualification</label>
                <select id="secondary_qualification" class="form-control">
                  <option value="" disabled selected>
                    Select Qualification
                  </option>
                  <option value="PMR">PMR</option>
                  <option value="SPM">SPM</option>
                  <option value="DIPLOMA">DIPLOMA</option>
                  <option value="DEGREE">DEGREE</option>
                  <option value="MASTER">MASTER</option>
                  <option value="PHD">PHD</option>
                  <option value="OTHERS">OTHERS</option>
                  <!-- Add more countries as needed -->
                </select>
              </div>
              <div class="col-md-6 mb-3">
                <label>Country of Institution</label
                ><input
                  type="text"
                  class="form-control"
                  id="secondary_country"
                />
              </div>
              <div class="col-md-6 mb-3">
                <label>Year of Graduation</label
                ><input type="text" class="form-control" id="year_gradschool" />
              </div>
              <div class="mb-3 text-left">
                <!--<img src="" alt="Result" class="rounded-circle mb-3 profile-img">-->
                <label>Result</label>
                <input
                  type="file"
                  class="form-control-file"
                  id="graduatesecondry"
                  accept=".jpg, .jpeg, .png"
                />
                <small id="fileHelp" class="form-text text-muted"></small>

                <script>
                  document
                    .getElementById("graduatesecondry")
                    .addEventListener("change", function () {
                      const file = this.files[0];
                      const helpText = document.getElementById("fileHelp");

                      if (file) {
                        const fileSizeMB = file.size / (1024 * 1024); // Convert to MB

                        if (fileSizeMB > 2) {
                          helpText.textContent =
                            "❌ File is too large. Max size is 2MB.";
                          this.value = ""; // Clear the file input
                        } else {
                          helpText.textContent = "✅ File looks good!";
                        }
                      }
                    });
                </script>
                <label>Certificate of completion studies</label>
                <!--<img src="" alt="Certificate of completion of studies" class="rounded-circle mb-3 profile-img">-->
                <input
                  type="file"
                  class="form-control-file"
                  id="Cert_sec_stud"
                  accept=".jpg, .jpeg, .png"
                />
                <small id="fileHelp" class="form-text text-muted"></small>

                <script>
                  document
                    .getElementById("Cert_ec_stud")
                    .addEventListener("change", function () {
                      const file = this.files[0];
                      const helpText = document.getElementById("fileHelp");

                      if (file) {
                        const fileSizeMB = file.size / (1024 * 1024); // Convert to MB

                        if (fileSizeMB > 2) {
                          helpText.textContent =
                            "❌ File is too large. Max size is 2MB.";
                          this.value = ""; // Clear the file input
                        } else {
                          helpText.textContent = "✅ File looks good!";
                        }
                      }
                    });
                </script>
              </div>
            </div>
          </div>
        </div>
        <!-- Step 6 -->
        <div class="tab">
          <div class="card p-4">
            <!-- 5. English Proficiency -->
            <h4 class="mt-4">English Proficiency</h4>
            <div class="row">
              <div class="col-md-12 mb-3">
                <label class="form-label d-block">English Test Taken</label>
                <div class="form-check form-check-inline" id="englishTest">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="englishTest"
                    value="TOEFL"
                  /><label class="form-check-label">TOEFL</label>
                </div>
                <div class="form-check form-check-inline">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="englishTest"
                    value="IELTS"
                  /><label class="form-check-label">IELTS</label>
                </div>
                <div class="form-check form-check-inline">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="englishTest"
                    value="Other"
                  /><label class="form-check-label" id="english_test_other"
                    >Other (specify)</label
                  >
                </div>
                <input
                  type="text"
                  class="form-control mt-2"
                  placeholder="Specify other test"
                />
              </div>
              <div class="col-md-6 mb-3">
                <label>Score</label
                ><input type="text" class="form-control" id="englishscore" />
              </div>
              <div class="col-md-6 mb-3">
                <label>Test Date</label
                ><input
                  type="date"
                  class="form-control"
                  id="english_test_date"
                />
              </div>
              <!-- Certificate -->
              <div class="mb-3 text-left">
                <!--<img src="" alt="Result" class="rounded-circle mb-3 profile-img">-->
                <label>Result English</label>
                <input
                  type="file"
                  class="form-control-file"
                  id="english_result_file"
                  accept=".jpg, .jpeg, .png"
                />
                <small id="fileHelp" class="form-text text-muted"></small>

                <script>
                  document
                    .getElementById("english_result_file")
                    .addEventListener("change", function () {
                      const file = this.files[0];
                      const helpText = document.getElementById("fileHelp");

                      if (file) {
                        const fileSizeMB = file.size / (1024 * 1024); // Convert to MB

                        if (fileSizeMB > 2) {
                          helpText.textContent =
                            "❌ File is too large. Max size is 2MB.";
                          this.value = ""; // Clear the file input
                        } else {
                          helpText.textContent = "✅ File looks good!";
                        }
                      }
                    });
                </script>
              </div>
            </div>
          </div>
        </div>
        <!-- Step 7 -->
        <div class="tab">
          <div class="card p-4">
            <!-- 6. Visa Information -->
            <h4 class="mt-4">Visa Information (International Students)</h4>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label d-block">Require Student Visa?</label>
                <div class="form-check form-check-inline" id="requireVisa">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="requireVisa"
                    value="Yes"
                  /><label class="form-check-label">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="requireVisa"
                    value="No"
                  /><label class="form-check-label">No</label>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label d-block">Type of Visa</label>
                <div class="form-check form-check-inline" id="visaType">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="visaType"
                    value="Student Visa"
                  /><label class="form-check-label">Student Visa</label>
                </div>
                <div class="form-check form-check-inline">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="visaType"
                    value="Dependent Visa"
                  /><label class="form-check-label">Dependent Visa</label>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <label>Visa Expiry Date</label
                ><input type="date" class="form-control" id="visa_expiry" />
              </div>
              <div class="col-md-6 mb-3">
                <label>Passport Expiry Date</label
                ><input type="date" class="form-control" id="passport_expiry" />
              </div>
              <!-- Thumbnail Image and File Input -->
              <div class="mb-3 text-left">
                <img
                  src="../assets/img/front page passport.png"
                  alt="First Page Visa"
                  class="mb-3 profile-img img-thumbnail zoomable"
                  style="width: 50px; cursor: pointer"
                  data-bs-toggle="modal"
                  data-bs-target="#zoomModalVisa"
                />

                <input
                  type="file"
                  class="form-control-file"
                  id="Passport_FPage"
                />
              </div>

              <!-- Modal for Zoomed Image -->
              <div
                class="modal fade"
                id="zoomModalVisa"
                tabindex="-1"
                aria-labelledby="zoomModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered">
                  <div class="modal-content">
                    <div class="modal-body text-center">
                      <img
                        src="../assets/img/front page passport.png"
                        alt="Zoomed Image"
                        class="img-fluid"
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Step 8 -->
        <div class="tab">
          <div class="card p-4">
            <!-- 8. Health Information -->
            <h4 class="mt-4">Health Information</h4>
            <div class="row">
              <div class="mb-3">
                <label class="form-label">
                  Please download the health declaration form, fill it out, and
                  upload it here. </label
                ><br />
                <a
                  href="../docs/Form A - Health Declaration Form For Applicant (PW).pdf"
                  download
                  class="btn btn-outline-primary mt-2"
                  target="_blank"
                >
                  📄 Download Health Declaration Form
                </a>
                <div class="mb-3 text-left">
                  <!--<img src="" alt="Result" class="rounded-circle mb-3 profile-img">-->
                  <label
                    >Upload Here after you fill up the health Application</label
                  >
                  <input
                    type="file"
                    class="form-control-file"
                    id="Healthdeclare_file"
                    accept=".jpg, .jpeg, .png"
                  />
                  <small id="fileHelp" class="form-text text-muted"></small>

                  <script>
                    document
                      .getElementById("Healthdeclare_file")
                      .addEventListener("change", function () {
                        const file = this.files[0];
                        const helpText = document.getElementById("fileHelp");

                        if (file) {
                          const fileSizeMB = file.size / (1024 * 1024); // Convert to MB

                          if (fileSizeMB > 2) {
                            helpText.textContent =
                              "❌ File is too large. Max size is 2MB.";
                            this.value = ""; // Clear the file input
                          } else {
                            helpText.textContent = "✅ File looks good!";
                          }
                        }
                      });
                  </script>
                </div>

                <div class="col-md-6 mb-3">
                  <label class="form-label d-block"
                    >Any known medical conditions?</label
                  >
                  <div
                    class="form-check form-check-inline"
                    id="medicalConditions"
                  >
                    <input
                      class="form-check-input"
                      type="radio"
                      name="medicalConditions"
                      id="medicalYes"
                      value="Yes"
                    />
                    <label class="form-check-label" for="medicalYes">Yes</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="medicalConditions"
                      value="No"
                    /><label class="form-check-label">No</label>
                  </div>
                  <input
                    type="text"
                    class="form-control mt-2"
                    placeholder="If yes, please specify"
                    id="specifycondition"
                  />
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label d-block"
                    >Currently on any regular medication?</label
                  >
                  <div
                    class="form-check form-check-inline"
                    id="current_medication"
                  >
                    <input
                      class="form-check-input"
                      type="radio"
                      name="current_medication"
                      value="Yes"
                    /><label class="form-check-label">Yes</label>
                  </div>

                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="current_medication"
                      value="No"
                    /><label class="form-check-label">No</label>
                  </div>
                  <input
                    type="text"
                    class="form-control mt-2"
                    placeholder="If yes, please specify"
                    id="specifycurrent"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Step 9 -->
        <div class="tab">
          <div class="card p-4">
            <!-- 10. Parent/Guardian Information -->
            <h4 class="mt-4">Parent/Guardian Information</h4>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label>Father's/Guardian's Name</label
                ><input type="text" class="form-control" id="Father_name" />
              </div>
              <div class="col-md-6 mb-3">
                <label>Mother's/Guardian's Name</label
                ><input type="text" class="form-control" id="Mother_name" />
              </div>
              <div class="col-md-6 mb-3">
                <label>Phone Number</label
                ><input type="text" class="form-control" id="ContactFather" />
              </div>
              <div class="col-md-6 mb-3">
                <label>Occupation</label
                ><input
                  type="text"
                  class="form-control"
                  id="Father_Occupation"
                />
              </div>
              <div class="col-md-6 mb-3">
                <label>Occupation</label
                ><input
                  type="text"
                  class="form-control"
                  id="Mother_Occupation"
                />
              </div>
              <div class="col-md-6 mb-3">
                <label>Phone Number</label
                ><input type="text" class="form-control" id="Mother_Phone" />
              </div>
            </div>
          </div>
        </div>
        <!-- Step 10 -->
        <div class="tab">
          <div class="card p-4">
            <!-- 10. PAYMENT RECEIPT -->
            <h4 class="mt-4">PAYMENT RECEIPT</h4>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label
                  >After applicant make a payment for MYR128.00, please upload
                  receipt here.
                </label>
                <label>
                  Payment must be made to the account —
                  <strong>GRAND INTERMAP: Maybank 564191599569 </strong>
                  <img
                    src="../assets/img/maybank-logo-png-transparent.png"
                    style="width: 100px; height: auto"
                  />
                  <img
                    src="../assets/img/FLYW_logo.png"
                    style="width: 70px; height: auto"
                  />
                </label>

                <!-- Thumbnail Image and File Input -->
                <div class="mb-3 text-left">
                  <img
                    src="../assets/img/Sample QR payment.png"
                    alt="Payment Checking"
                    class="mb-3 profile-img img-thumbnail zoomable"
                    style="width: 50px; cursor: pointer"
                    data-bs-toggle="modal"
                    data-bs-target="#zoomModal"
                  />

                  <input
                    type="file"
                    class="form-control-file"
                    id="payment_receipt_file"
                  />
                </div>

                <!-- Modal for Zoomed Image -->
                <div
                  class="modal fade"
                  id="zoomModal"
                  tabindex="-1"
                  aria-labelledby="zoomModalLabel"
                  aria-hidden="true"
                >
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-body text-center">
                        <img
                          src="../assets/img/Sample QR payment.png"
                          alt="Zoomed Image"
                          class="img-fluid"
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!--<br>
                  <button type="submit">Upload</button>-->

            <script>
              const fileInput = document.getElementById("paymentchecking");
              const helpText = document.getElementById("fileHelp");

              let finalFile = null;

              fileInput.addEventListener("change", function () {
                const file = this.files[0];
                if (!file) return;

                if (!file.type.startsWith("image/")) {
                  helpText.textContent = "❌ Please upload an image file.";
                  return;
                }

                const maxSizeMB = 2;
                const maxSizeBytes = maxSizeMB * 1024 * 1024;

                if (file.size > maxSizeBytes) {
                  // Compress image
                  const reader = new FileReader();
                  reader.onload = function (event) {
                    const img = new Image();
                    img.onload = function () {
                      const canvas = document.createElement("canvas");
                      const ctx = canvas.getContext("2d");

                      const scaleFactor = Math.sqrt(maxSizeBytes / file.size); // adjust size
                      canvas.width = img.width * scaleFactor;
                      canvas.height = img.height * scaleFactor;

                      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

                      canvas.toBlob(
                        function (blob) {
                          finalFile = new File([blob], file.name, {
                            type: file.type,
                          });
                          helpText.textContent = `✅ Image compressed to ${(
                            finalFile.size /
                            1024 /
                            1024
                          ).toFixed(2)} MB`;
                        },
                        file.type,
                        0.8
                      ); // 0.8 = quality (80%)
                    };
                    img.src = event.target.result;
                  };
                  reader.readAsDataURL(file);
                } else {
                  finalFile = file;
                  helpText.textContent =
                    "✅ File is under 2MB, no compression needed.";
                }
              });

              document
                .getElementById("uploadForm")
                .addEventListener("submit", function (e) {
                  e.preventDefault();

                  if (!finalFile) {
                    alert("Please select a valid image.");
                    return;
                  }

                  // Upload using FormData (as example)
                  const formData = new FormData();
                  formData.append("file", finalFile);

                  // Simulate upload
                  console.log("Uploading:", finalFile);
                  alert("✅ File ready to upload! (check console)");

                  // You could now use fetch() or AJAX to send `formData` to your backend
                });
            </script>
          </div>
        </div>
        <!-- Step 11 -->
        <div class="tab">
          <div class="card p-4">
            <!-- 10. Declaration -->
            <h4 class="mt-4">Declaration</h4>
            <div class="form-check mb-3">
              <input
                class="form-check-input"
                type="checkbox"
                id="declarationCheck"
                required
              />
              <label class="form-check-label" for="declarationCheck">
                I declare that the information provided is accurate.
              </label>
            </div>

            <div class="col-md-6 mb-3">
              <label>Date</label
              ><input type="date" class="form-control" id="datesign" />
            </div>
            <div class="col-md-6 mb-3">
              <label>Signature of Parent/Guardian (if applicable)</label
              ><input type="text" class="form-control" id="sign_parents" />
            </div>
          </div>
        </div>
        <!-- Navigation Buttons -->
        <div class="mt-4">
          <button
            type="button"
            class="btn btn-secondary"
            id="prevBtn"
            onclick="nextPrev(-1)"
          >
            Previous
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            id="nextBtn"
            onclick="nextPrev(1)"
          >
            Next
          </button>
        </div>
        <!-- Step Indicators -->
        <div class="text-center mt-3">
          <span class="step"></span>
          <span class="step"></span>
          <span class="step"></span>
          <span class="step"></span>
          <span class="step"></span>
          <span class="step"></span>
          <span class="step"></span>
          <span class="step"></span>
          <span class="step"></span>
          <span class="step"></span>
          <span class="step"></span>
        </div>
      </form>
    </div>
  </div>
</div>
<script>
  var currentTab = 0;
  showTab(currentTab);
  let formData = {};
  let data1,
    data2,
    data3,
    data4,
    data5,
    data6,
    data7,
    data8,
    data9,
    data10 = {};

  function showTab(n) {
    var x = document.getElementsByClassName("tab");
    x[n].style.display = "block";
    if (n == 0) {
      document.getElementById("prevBtn").style.display = "none";
    } else {
      document.getElementById("prevBtn").style.display = "inline";
    }
    if (n == x.length - 1) {
      document.getElementById("nextBtn").innerHTML = "Submit";
    } else {
      document.getElementById("nextBtn").innerHTML = "Next";
    }
    fixStepIndicator(n);
  }

  async function nextPrev(n) {
    var x = document.getElementsByClassName("tab");

    // Exit if invalid
    if (n == 1 && !validateForm()) return false;

    // ✅ Save data from current tab before switching
    saveCurrentTabData(currentTab);

    // Hide current tab
    x[currentTab].style.display = "none";

    // Move to next or previous
    currentTab = currentTab + n;

    // If last step, submit the form
    if (currentTab >= x.length) {
      const combined = {
        ...data1,
        ...data2,
        ...data3,
        ...data4,
        ...data5,
        ...data6,
        ...data7,
        ...data8,
        ...data9,
        ...data10,
      };
      console.log("Final combined data:", combined); // for debugging

      const { error } = await supabase
        .from("student_applications")
        .insert([combined]);

      if (error) {
        alert("Error saving application: " + error.message);
      } else {
        alert("Application saved successfully!");
        document.getElementById("regForm").reset();
      }
      return true;
    }

    // Show next tab
    showTab(currentTab);
  }

  function toBase64(file) {
    console.log("hit");
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.readAsDataURL(file);
      reader.onload = () => resolve(reader.result); // includes data:image/... prefix
      reader.onerror = (error) => reject(error);
    });
  }

  async function saveCurrentTabData(tabIndex) {
    const tab = document.getElementsByClassName("tab")[tabIndex];
    const inputs = tab.getElementsByTagName("input");

    if (tabIndex === 0) {
      // Convert image to base64
      const fileInput = document.getElementById("profilePic");
      const file = fileInput.files[0];

      let base64Image = "";
      if (file) {
        base64Image = await toBase64(file);
      }
      data1 = {
        // DATA INFORMATION
        // profile_photo: base64Image,
        full_name: document.getElementById("full_name_student").value,
        gender:
          document.querySelector('input[name="gender"]:checked')?.value || null,
        ic_or_passport: document.getElementById("ic_no").value,
        date_of_birth: document.getElementById("dob").value,
        nationality: document.getElementById("nationality").value,
        race: document.getElementById("race").value,
        religion: document.getElementById("religion").value,
        contact_number: document.getElementById("phone").value,
        email: document.querySelector('input[type="email"]').value,
        emergency_contact_name:
          document.getElementById("emergency_contact").value,
        emergency_contact_number: document.getElementById(
          "emergency_contact_No"
        ).value,
      };
      console.log(data1);
    } else if (tabIndex === 1) {
      console.log("test");
      data2 = {
        // PERMANENT ADDRESS
        permanent_address: document.getElementById("P_address").value,
        permanent_city: document.getElementById("P_city").value,
        permanent_postcode: document.getElementById("P_postcode").value,
        permanent_state: document.getElementById("P_state").value,
        alternate_phone_number: document.getElementById("P_different_no").value,
      };
    } else if (tabIndex === 2) {
      data3 = {
        // PROGRAM INFORMATION
        program_status: document.getElementById("programstatus").value,
        program_name: document.getElementById("program_name").value,
        // study_mode: document.getElementById("Mode_Study").value,
        // // study_mode:
        // //   document.getElementById('input[name="Mode_Study"]:checked').value ||
        // //   null,
        intake_year: document.getElementById("Intakeyear").value,
        intake_semester:
          document.querySelector('input[name="semester"]:checked').value ||
          null,
      };
    } else if (tabIndex === 3) {
      // Convert image to base64
      const fileInput = document.getElementById("ResultQualification");
      const file = fileInput.files[0];

      const fileInput2 = document.getElementById(
        "Certificate_completion_studies"
      );
      const file2 = fileInput2.files[0];

      let base64Image = "";
      if (file || file2) {
        base64Image = await toBase64(file || file2);
      }
      data4 = {
        // ACADEMIC QUALIFICATION
        highest_qualification: document.getElementById("H_Qualification").value,
        institution_name: document.getElementById("institution_name").value,
        institution_country: document.getElementById("Institution_country")
          .value,
        graduation_year: document.getElementById("Year_grad").value,
        ResultQualification: base64Image,
        Certificate_completion_studies_file: base64Image,
        // qualification_result_file: document.getElementById(
        //   "qualification_result_file"
        // ).value,
        // qualification_certificate_file: document.getElementById(
        //   "qualification_certificate_file"
        // ).value,
      };
    } else if (tabIndex === 4) {
      const fileInput3 = document.getElementById("graduatesecondry");
      const file3 = fileInput3.files[0];

      const fileInput4 = document.getElementById("Cert_sec_stud");
      const file4 = fileInput4.files[0];

      let base64Image = "";
      if (file3 || file4) {
        base64Image = await toBase64(file3 || file4);
      }
      data5 = {
        // SECONDARY
        secondary_name: document.getElementById("secondary_name").value,
        secondary_address: document.getElementById("secondary_address").value,
        secondary_country: document.getElementById("secondary_country").value,
        secondary_qualification: document.getElementById(
          "secondary_qualification"
        ).value,
        year_gradschool: document.getElementById("year_gradschool").value,
        secondary_school: document.getElementById("secondary_country").value,
        // graduatesecondry: base64Image,
        // Cert_sec_stud: base64Image,
      };
    } else if (tabIndex === 5) {
      const fileInput5 = document.getElementById("english_result_file");
      const file5 = fileInput5.files[0];

      let base64Image = "";
      if (file5) {
        base64Image = await toBase64(file5);
      }
      data6 = {
        // ENGLISH
        english_test:
          document.querySelector('input[name="englishTest"]:checked').value ||
          null,
        english_test_other: document.getElementById("english_test_other").value,
        english_score: document.getElementById("englishscore").value,
        english_test_date: document.getElementById("english_test_date").value,

        // english_result_file: base64Image,
      };
    } else if (tabIndex === 6) {
      const fileInput6 = document.getElementById("Passport_FPage");
      const file6 = fileInput6.files[0];

      let base64Image = "";
      if (file6) {
        base64Image = await toBase64(file6);
      }
      data7 = {
        // VISA INFORMATION

        require_visa:
          document.querySelector('input[name="requireVisa"]:checked').value ||
          null,
        visa_type:
          document.querySelector('input[name="visaType"]:checked').value ||
          null,
        visa_expiry: document.getElementById("visa_expiry").value,
        // passport_expiry: document.getElementById("passport_expiry").value,
        // Passport_FPage: base64Image,
      };
    } else if (tabIndex === 7) {
      const fileInput8 = document.getElementById("Healthdeclare_file");
      const file8 = fileInput8.files[0];

      let base64Image = "";
      if (file8) {
        base64Image = await toBase64(file8);
      }
      data8 = {
        // HEALTH INFORMATION
        // Healthdeclare_file: base64Image,
        medicalConditions: document.querySelector(
          'input[name="medicalConditions"]'
        ).value,
        specifycondition: document.getElementById("specifycondition").value,
        current_medication:
          document.querySelector('input[name="current_medication"]:checked')
            .value || null,
        specifycurrent: document.getElementById("specifycurrent").value,
      };
    } else if (tabIndex === 8) {
      data9 = {
        // PARENTS GUARDIAN
        father_name: document.getElementById("Father_name").value,
        mother_name: document.getElementById("Mother_name").value,
        father_phone: document.getElementById("ContactFather").value,
        father_occupation: document.getElementById("Father_Occupation").value,
        mother_occupation: document.getElementById("Mother_Occupation").value,
        mother_name: document.getElementById("Mother_Phone").value,
      };
    } else if (tabIndex === 9) {
      const fileInput7 = document.getElementById("payment_receipt_file");
      const file7 = fileInput7.files[0];

      let base64Image = "";
      if (file7) {
        base64Image = await toBase64(file7);
      }
      data9 = {
        // PAYMENT RECEIPT
        // payment_receipt_file: base64Image,
      };
    } else if (tabIndex === 10) {
      const checkbox = document.getElementById("declarationCheck");
      const isChecked = checkbox.checked;
      data10 = {
        // DECLARATION

        declaration_signature: isChecked,
        declaration_date: document.getElementById("datesign").value,
        declaration_signature: document.getElementById("sign_parents").value,
      };
    }
  }
  function validateForm() {
    var x,
      y,
      i,
      valid = true;
    x = document.getElementsByClassName("tab");
    y = x[currentTab].getElementsByTagName("input");
    for (i = 0; i < y.length; i++) {
      if (y[i].value == "") {
        y[i].className += " is-invalid";
        valid = false;
      } else {
        y[i].className = y[i].className.replace(" is-invalid", "");
      }
    }
    if (valid) {
      document.getElementsByClassName("step")[currentTab].className +=
        " finish";
    }
    return valid;
  }

  function fixStepIndicator(n) {
    var i,
      x = document.getElementsByClassName("step");
    for (i = 0; i < x.length; i++) {
      x[i].className = x[i].className.replace(" active", "");
    }
    x[n].className += " active";
  }

  // Initialize flatpickr
  flatpickr("#dob", {
    dateFormat: "Y-m-d", // Set date format
    minDate: "1900-01-01", // Minimum selectable date
    maxDate: "today", // Maximum selectable date
  });
</script>
<!-- <script>
  document
    .getElementById("nextBtnz")
    .addEventListener("click", async function () {
      // Convert image to base64
      const fileInput = document.getElementById("profilePic");
      const file = fileInput.files[0];

      let base64Image = "";
      if (file) {
        base64Image = await toBase64(file);
      }

      // Get form values
      const data = {
        profile_photo: base64Image,
        full_name: document.getElementById("full_name_student").value,
        gender:
          document.querySelector('input[name="gender"]:checked')?.value || null,
        ic_or_passport: document.getElementById("ic_no").value,
        date_of_birth: document.getElementById("dob").value,
        nationality: document.getElementById("nationality").value,
        race: document.getElementById("race").value,
        religion: document.getElementById("religion").value,
        contact_number: document.getElementById("phone").value,
        email: document.querySelector('input[type="email"]').value,
        emergency_contact_name:
          document.getElementById("emergency_contact").value,
        emergency_contact_number: document.getElementById(
          "emergency_contact_No"
        ).value,
        // permanent_address: document.getElementById("P_address").value,
        // permanent_city: document.getElementById("P_city").value,
        // permanent_postcode: document.getElementById("P_postcode").value,
        // permanent_state: document.getElementById("P_state").value,
        // alternate_phone_number: document.getElementById("P_different_no").value,
        // program_status: document.getElementById("programstatus").value,
        // program_name: document.getElementById("Mode_Study").value,
        // study_mode: document.getElementById("study_mode").value,
        // intake_year: document.getElementById("intake_year").value,
        // intake_semester: document.getElementById("intake_semester").value,

        // home_country_address: document.getElementById("home_country_address")
        //   .value,
        // home_country_city: document.getElementById("home_country_city").value,
        // home_country_country: document.getElementById("home_country_country")
        //   .value,
        // home_country_postcode: document.getElementById("home_country_postcode")
        //   .value,

        // highest_qualification: document.getElementById("highest_qualification")
        //   .value,
        // institution_name: document.getElementById("institution_name").value,
        // institution_country: document.getElementById("institution_country")
        //   .value,
        // graduation_year: document.getElementById("graduation_year").value,
        // qualification_result_file: document.getElementById(
        //   "qualification_result_file"
        // ).value,
        // qualification_certificate_file: document.getElementById(
        //   "qualification_certificate_file"
        // ).value,

        // secondary_school: document.getElementById("secondary_school").value,
        // secondary_qualification: document.getElementById(
        //   "secondary_qualification"
        // ).value,
        // higher_education_name: document.getElementById("higher_education_name")
        //   .value,
        // english_test: document.getElementById("english_test").value,
        // english_test_other: document.getElementById("english_test_other").value,
        // english_score: document.getElementById("english_score").value,
        // english_test_date: document.getElementById("english_test_date").value,
        // english_result_file: document.getElementById("english_result_file")
        //   .value,
        // require_visa: document.getElementById("require_visa").value,
        // visa_expiry: document.getElementById("visa_expiry").value,
        // passport_expiry: document.getElementById("passport_expiry").value,
        // visa_image: document.getElementById("visa_image").value,
        // health_declaration_file: document.getElementById(
        //   "health_declaration_file"
        // ).value,
        // known_medical_conditions: document.getElementById(
        //   "known_medical_conditions"
        // ).value,
        // on_medication: document.getElementById("on_medication").value,
        // father_name: document.getElementById("father_name").value,
        // father_occupation: document.getElementById("father_occupation").value,
        // father_phone: document.getElementById("father_phone").value,
        // mother_name: document.getElementById("mother_name").value,
        // mother_occupation: document.getElementById("mother_occupation").value,
        // mother_phone: document.getElementById("mother_phone").value,
        // payment_receipt_file: document.getElementById("payment_receipt_file")
        //   .value,
        // declaration_date: document.getElementById("declaration_date").value,
        // declaration_signature: document.getElementById("declaration_signature")
        //   .value,
        // declaration_signature: document.getElementById("declaration_signature")
        //   .value,
      };

      // Insert into Supabase
      const { error } = await supabase
        .from("student_applications")
        .insert([data]);

      if (error) {
        alert("Error saving application: " + error.message);
      } else {
        alert("Application saved successfully!");
        document.getElementById("regForm").reset();
      }
    });

  function toBase64(file) {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.readAsDataURL(file);
      reader.onload = () => resolve(reader.result); // includes data:image/... prefix
      reader.onerror = (error) => reject(error);
    });
  }
</script> -->
